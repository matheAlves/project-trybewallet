(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{35:function(e,t,n){e.exports=n(52)},40:function(e,t,n){},46:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),l=n.n(c),i=n(23),u=(n(40),n(6)),o=n(13),s=n(31),p=n(32),d=n(8),m=n(33),h=n(14),b=n.n(h),E=n(19),f=function(){var e=Object(E.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){return{type:"CURRENCIES_ACTION",currencies:e}},j=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:n=e.sent,a=Object.keys(n),r=a.filter((function(e){return"USDT"!==e})),t(v(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e,t){return{type:"ADD_EXPENSE",newExpense:Object(d.a)(Object(d.a)({},e),{},{exchangeRates:t})}},g=function(e){return function(e){return function(){var t=Object(E.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},t.next=3,f();case 3:r=t.sent,Object.entries(r).forEach((function(e){var t=Object(m.a)(e,2),n=t[0],r=t[1];a[n]=r})),n(O(e,a));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)},y={email:""},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ACTION":return Object(d.a)(Object(d.a)({},e),{},{email:t.email});default:return e}},w=n(34),C={currencies:[],expenses:[]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENCIES_ACTION":return Object(d.a)(Object(d.a)({},e),{},{currencies:t.currencies});case"ADD_EXPENSE":return Object(d.a)(Object(d.a)({},e),{},{expenses:[].concat(Object(w.a)(e.expenses),[t.newExpense])});default:return e}},D=Object(o.combineReducers)({user:x,wallet:k}),S=Object(o.createStore)(D,Object(s.composeWithDevTools)(Object(o.applyMiddleware)(p.a))),F=n(2),R=n(16),N=n(9),A=n(10),T=n(12),I=n(11),M=(n(46),function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(){var e;return Object(N.a)(this,n),(e=t.call(this)).validateButton=function(){var t=e.state,n=t.email,a=t.password;n.match(/[a-z0-9]+@[a-z]+\.[a-z]{2,3}/i)&&a.length>=6?e.setState({buttonDisabled:!1}):e.setState({buttonDisabled:!0})},e.handleSubmit=function(){var t=e.props,n=t.dispatchEmail,a=t.history;n(e.state.email),a.push("/carteira")},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(R.a)({},a,r),(function(){e.validateButton()}))},e.state={buttonDisabled:!0,email:"",password:""},e}return Object(A.a)(n,[{key:"render",value:function(){var e=this.state,t=e.buttonDisabled,n=e.email,a=e.password;return r.a.createElement("form",{className:"login-form"},"Login",r.a.createElement("label",{htmlFor:"email-input"},r.a.createElement("input",{value:n,name:"email",placeholder:"email","data-testid":"email-input",type:"text",id:"email-input",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"password-input"},r.a.createElement("input",{value:a,name:"password",placeholder:"password","data-testid":"password-input",type:"password",id:"password-input",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",disabled:t,onClick:this.handleSubmit},"Entrar"))}}]),n}(r.a.Component)),U=Object(u.b)(null,(function(e){return{dispatchEmail:function(t){return e(function(e){return{type:"USER_ACTION",email:e}}(t))}}}))(M),_=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.expenses.reduce((function(e,t){return e+=t.value*t.exchangeRates[t.currency].ask}),0);return r.a.createElement("header",null,r.a.createElement("span",{"data-testid":"email-field"},t),r.a.createElement("span",{"data-testid":"total-field"},n.toFixed(2)),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))}}]),n}(r.a.Component),z=Object(u.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}),null)(_),B=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(){var e;return Object(N.a)(this,n),(e=t.call(this)).createDropdown=function(e){return e.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)}))},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(R.a)({},a,r))},e.handleSubmit=function(){var t=e.props,n=t.dispatchExpense,a=t.expenses;e.setState({id:a.length},(function(){n(e.state),e.setState({value:0})}))},e.state={id:0,value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e}return Object(A.a)(n,[{key:"render",value:function(){var e=this.props.currencies,t=this.state,n=t.value,a=t.description;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"value-input"},"Valor:",r.a.createElement("input",{name:"value",value:n,id:"value-input",type:"number","data-testid":"value-input",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o:",r.a.createElement("input",{name:"description",value:a,id:"description-input",type:"text","data-testid":"description-input",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"currency-input"},"Moeda:",r.a.createElement("select",{name:"currency",id:"currency-input","data-testid":"currency-input",onChange:this.handleChange},this.createDropdown(e))),r.a.createElement("label",{htmlFor:"method-input"},"M\xe9todo de pagamento:",r.a.createElement("select",{name:"method",id:"method-input","data-testid":"method-input",onChange:this.handleChange},this.createDropdown(["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"]))),r.a.createElement("label",{htmlFor:"tag-input"},"Categoria:",r.a.createElement("select",{name:"tag",id:"tag-input","data-testid":"tag-input",onChange:this.handleChange},this.createDropdown(["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"]))),r.a.createElement("button",{type:"button",onClick:this.handleSubmit},"Adicionar despesa"))}}]),n}(r.a.Component),L=Object(u.b)((function(e){return{currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),(function(e){return{dispatchExpense:function(t){return e(g(t))}}}))(B),V=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"render",value:function(){var e=this.props.expenses;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,Number.parseFloat(e.value).toFixed(2)),r.a.createElement("td",null,e.exchangeRates[e.currency].name),r.a.createElement("td",null,Number.parseFloat(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,Number.parseFloat(e.value*e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,r.a.createElement("p",null,"Real")),r.a.createElement("td",null,r.a.createElement("button",{type:"button"},"Excluir")))}))))}}]),n}(r.a.Component),W=Object(u.b)((function(e){return{expenses:e.wallet.expenses}}))(V),J=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement(L,null),r.a.createElement(W,null))}}]),n}(r.a.Component),P=Object(u.b)(null,(function(e){return{getCurrencies:function(){return e(j)}}}))(J);var X=function(){return r.a.createElement(F.c,null,r.a.createElement(F.a,{exact:!0,path:"/",component:U}),r.a.createElement(F.a,{exact:!0,path:"/carteira",component:P}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(u.a,{store:S},r.a.createElement(i.a,null,r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.84a8171d.chunk.js.map